import { expect } from "vitest";

export default [
  {
    testName: "utils/txs/evaluate/utxos success with cbor only (JSON)",
    endpoints: ["utils/txs/evaluate/utxos"],
    postBody: JSON.stringify({
      cbor: "84a80081825820b3965a22fd765172e1a39f043751d432b59bf547aa72e25c797d8ec7746d6e74000182825839005fede544922087b11dca60e20ee59857438a622be25c7597bb950b8516951f0ba348021b5920c08c7a572c0d0034d7aa1139db8caad3fc47821a0011e360a1581c55d96504a2652bf541a6cb1af89ae3aff0e8c54628f0cf5b62c725b6a14c6262626c6f636b66726f737401825839005fede544922087b11dca60e20ee59857438a622be25c7597bb950b8516951f0ba348021b5920c08c7a572c0d0034d7aa1139db8caad3fc471a05df3a7a021a0004c32609a1581c55d96504a2652bf541a6cb1af89ae3aff0e8c54628f0cf5b62c725b6a14c6262626c6f636b66726f7374010b582006b4d2d9486614dfbce2e02b1f85308d3fc7da3f6c1676925bf34a5d5b5596d90d81825820b3965a22fd765172e1a39f043751d432b59bf547aa72e25c797d8ec7746d6e740010825839005fede544922087b11dca60e20ee59857438a622be25c7597bb950b8516951f0ba348021b5920c08c7a572c0d0034d7aa1139db8caad3fc471a05eebc47111a000724b9a20581840100d87980821a0008ef221a0af2f375068159079a59079701000033233223232323232323232323232323322323232323222232325335332232333573466e1c005201401d01c375a00e6666ae68cdc39aab9d37540089000100c11931900c19ab9c0190180163333573466e1cd55cea80124000466442466002006004646464646464646464646464646666ae68cdc39aab9d500c480008cccccccccccc88888888888848cccccccccccc00403403002c02802402001c01801401000c008cd4054058d5d0a80619a80a80b1aba1500b33501501735742a014666aa032eb94060d5d0a804999aa80cbae501835742a01066a02a0406ae85401cccd54064085d69aba150063232323333573466e1cd55cea801240004664424660020060046464646666ae68cdc39aab9d5002480008cc8848cc00400c008cd40add69aba15002302c357426ae8940088c98c80b8cd5ce01781701609aab9e5001137540026ae854008c8c8c8cccd5cd19b8735573aa004900011991091980080180119a815bad35742a00460586ae84d5d1280111931901719ab9c02f02e02c135573ca00226ea8004d5d09aba2500223263202a33573805605405026aae7940044dd50009aba1500533501575c6ae854010ccd540640748004d5d0a801999aa80cbae200135742a004603e6ae84d5d1280111931901319ab9c027026024135744a00226ae8940044d5d1280089aba25001135744a00226ae8940044d5d1280089aba25001135744a00226ae8940044d55cf280089baa00135742a004601e6ae84d5d1280111931900c19ab9c019018016101713263201733573892010350543500017135573ca00226ea800448c88c008dd6000990009aa80b111999aab9f0012500a233500930043574200460066ae880080508c8c8cccd5cd19b8735573aa004900011991091980080180118061aba150023005357426ae8940088c98c8050cd5ce00a80a00909aab9e5001137540024646464646666ae68cdc39aab9d5004480008cccc888848cccc00401401000c008c8c8c8cccd5cd19b8735573aa0049000119910919800801801180a9aba1500233500f014357426ae8940088c98c8064cd5ce00d00c80b89aab9e5001137540026ae854010ccd54021d728039aba150033232323333573466e1d4005200423212223002004357426aae79400c8cccd5cd19b875002480088c84888c004010dd71aba135573ca00846666ae68cdc3a801a400042444006464c6403666ae7007006c06406005c4d55cea80089baa00135742a00466a016eb8d5d09aba2500223263201533573802c02a02626ae8940044d5d1280089aab9e500113754002266aa002eb9d6889119118011bab00132001355013223233335573e0044a010466a00e66442466002006004600c6aae754008c014d55cf280118021aba200301213574200222440042442446600200800624464646666ae68cdc3a800a40004642446004006600a6ae84d55cf280191999ab9a3370ea0049001109100091931900819ab9c01101000e00d135573aa00226ea80048c8c8cccd5cd19b875001480188c848888c010014c01cd5d09aab9e500323333573466e1d400920042321222230020053009357426aae7940108cccd5cd19b875003480088c848888c004014c01cd5d09aab9e500523333573466e1d40112000232122223003005375c6ae84d55cf280311931900819ab9c01101000e00d00c00b135573aa00226ea80048c8c8cccd5cd19b8735573aa004900011991091980080180118029aba15002375a6ae84d5d1280111931900619ab9c00d00c00a135573ca00226ea80048c8cccd5cd19b8735573aa002900011bae357426aae7940088c98c8028cd5ce00580500409baa001232323232323333573466e1d4005200c21222222200323333573466e1d4009200a21222222200423333573466e1d400d2008233221222222233001009008375c6ae854014dd69aba135744a00a46666ae68cdc3a8022400c4664424444444660040120106eb8d5d0a8039bae357426ae89401c8cccd5cd19b875005480108cc8848888888cc018024020c030d5d0a8049bae357426ae8940248cccd5cd19b875006480088c848888888c01c020c034d5d09aab9e500b23333573466e1d401d2000232122222223005008300e357426aae7940308c98c804ccd5ce00a00980880800780700680600589aab9d5004135573ca00626aae7940084d55cf280089baa0012323232323333573466e1d400520022333222122333001005004003375a6ae854010dd69aba15003375a6ae84d5d1280191999ab9a3370ea0049000119091180100198041aba135573ca00c464c6401866ae700340300280244d55cea80189aba25001135573ca00226ea80048c8c8cccd5cd19b875001480088c8488c00400cdd71aba135573ca00646666ae68cdc3a8012400046424460040066eb8d5d09aab9e500423263200933573801401200e00c26aae7540044dd500089119191999ab9a3370ea00290021091100091999ab9a3370ea00490011190911180180218031aba135573ca00846666ae68cdc3a801a400042444004464c6401466ae7002c02802001c0184d55cea80089baa0012323333573466e1d40052002200823333573466e1d40092000200823263200633573800e00c00800626aae74dd5000a4c240029210350543100122002122001112323001001223300330020020014c1010a0001f5f6",
    }),
    headers: { "Content-Type": "application/json" },
    response: {
      type: "jsonwsp/response",
      version: "1.0",
      servicename: "ogmios",
      methodname: "EvaluateTx",
      result: {
        EvaluationResult: {
          "mint:0": {
            memory: 585_506,
            steps: 147_083_646,
          },
        },
      },
      reflection: { id: expect.any(String) },
    },
  },
  {
    testName: "utils/txs/evaluate cbor only, multi purpose",
    endpoints: ["utils/txs/evaluate/utxos"],
    postBody: JSON.stringify({
      cbor: "84a8008282582078b8ccc3d7070fd5d0384be118a72f045c001797383ce52d4a5efd6330554eb10082582078b8ccc3d7070fd5d0384be118a72f045c001797383ce52d4a5efd6330554eb1020182825839004c5c521383638d2d99acc398695006d3d933ceea4eb01168181ea44a9233ea996cedec827a45702ed21d76379960634cb9ab158033a7bdd4821a0011e360a1581c55d96504a2652bf541a6cb1af89ae3aff0e8c54628f0cf5b62c725b6a14c6262626c6f636b66726f737401825839004c5c521383638d2d99acc398695006d3d933ceea4eb01168181ea44a9233ea996cedec827a45702ed21d76379960634cb9ab158033a7bdd41a05c58f1c021a0005100109a1581c55d96504a2652bf541a6cb1af89ae3aff0e8c54628f0cf5b62c725b6a14c6262626c6f636b66726f7374010b5820932aaaa16ad25c3939c35aa9bb75ed2fb18609bd67721fc80b86b0c9d7b9e5d80d8182582078b8ccc3d7070fd5d0384be118a72f045c001797383ce52d4a5efd6330554eb10210825839004c5c521383638d2d99acc398695006d3d933ceea4eb01168181ea44a9233ea996cedec827a45702ed21d76379960634cb9ab158033a7bdd41a05889f3b111a00079802a40381583e583c0100003232323232323222233335734660080060044931324c446600e6008004600600200400246ae84c0080048d55cf1baa001001223375e0040021049fd8799fd8799f581c4c5c521383638d2d99acc398695006d3d933ceea4eb01168181ea44affffff0582840000d8799fd8799f581c4c5c521383638d2d99acc398695006d3d933ceea4eb01168181ea44affff821923221a00373027840100d87980821a000ae5081a0d6ba692068159079a59079701000033233223232323232323232323232323322323232323222232325335332232333573466e1c005201401d01c375a00e6666ae68cdc39aab9d37540089000100c11931900c19ab9c0190180163333573466e1cd55cea80124000466442466002006004646464646464646464646464646666ae68cdc39aab9d500c480008cccccccccccc88888888888848cccccccccccc00403403002c02802402001c01801401000c008cd4054058d5d0a80619a80a80b1aba1500b33501501735742a014666aa032eb94060d5d0a804999aa80cbae501835742a01066a02a0406ae85401cccd54064085d69aba150063232323333573466e1cd55cea801240004664424660020060046464646666ae68cdc39aab9d5002480008cc8848cc00400c008cd40add69aba15002302c357426ae8940088c98c80b8cd5ce01781701609aab9e5001137540026ae854008c8c8c8cccd5cd19b8735573aa004900011991091980080180119a815bad35742a00460586ae84d5d1280111931901719ab9c02f02e02c135573ca00226ea8004d5d09aba2500223263202a33573805605405026aae7940044dd50009aba1500533501575c6ae854010ccd540640748004d5d0a801999aa80cbae200135742a004603e6ae84d5d1280111931901319ab9c027026024135744a00226ae8940044d5d1280089aba25001135744a00226ae8940044d5d1280089aba25001135744a00226ae8940044d55cf280089baa00135742a004601e6ae84d5d1280111931900c19ab9c019018016101713263201733573892010350543500017135573ca00226ea800448c88c008dd6000990009aa80b111999aab9f0012500a233500930043574200460066ae880080508c8c8cccd5cd19b8735573aa004900011991091980080180118061aba150023005357426ae8940088c98c8050cd5ce00a80a00909aab9e5001137540024646464646666ae68cdc39aab9d5004480008cccc888848cccc00401401000c008c8c8c8cccd5cd19b8735573aa0049000119910919800801801180a9aba1500233500f014357426ae8940088c98c8064cd5ce00d00c80b89aab9e5001137540026ae854010ccd54021d728039aba150033232323333573466e1d4005200423212223002004357426aae79400c8cccd5cd19b875002480088c84888c004010dd71aba135573ca00846666ae68cdc3a801a400042444006464c6403666ae7007006c06406005c4d55cea80089baa00135742a00466a016eb8d5d09aba2500223263201533573802c02a02626ae8940044d5d1280089aab9e500113754002266aa002eb9d6889119118011bab00132001355013223233335573e0044a010466a00e66442466002006004600c6aae754008c014d55cf280118021aba200301213574200222440042442446600200800624464646666ae68cdc3a800a40004642446004006600a6ae84d55cf280191999ab9a3370ea0049001109100091931900819ab9c01101000e00d135573aa00226ea80048c8c8cccd5cd19b875001480188c848888c010014c01cd5d09aab9e500323333573466e1d400920042321222230020053009357426aae7940108cccd5cd19b875003480088c848888c004014c01cd5d09aab9e500523333573466e1d40112000232122223003005375c6ae84d55cf280311931900819ab9c01101000e00d00c00b135573aa00226ea80048c8c8cccd5cd19b8735573aa004900011991091980080180118029aba15002375a6ae84d5d1280111931900619ab9c00d00c00a135573ca00226ea80048c8cccd5cd19b8735573aa002900011bae357426aae7940088c98c8028cd5ce00580500409baa001232323232323333573466e1d4005200c21222222200323333573466e1d4009200a21222222200423333573466e1d400d2008233221222222233001009008375c6ae854014dd69aba135744a00a46666ae68cdc3a8022400c4664424444444660040120106eb8d5d0a8039bae357426ae89401c8cccd5cd19b875005480108cc8848888888cc018024020c030d5d0a8049bae357426ae8940248cccd5cd19b875006480088c848888888c01c020c034d5d09aab9e500b23333573466e1d401d2000232122222223005008300e357426aae7940308c98c804ccd5ce00a00980880800780700680600589aab9d5004135573ca00626aae7940084d55cf280089baa0012323232323333573466e1d400520022333222122333001005004003375a6ae854010dd69aba15003375a6ae84d5d1280191999ab9a3370ea0049000119091180100198041aba135573ca00c464c6401866ae700340300280244d55cea80189aba25001135573ca00226ea80048c8c8cccd5cd19b875001480088c8488c00400cdd71aba135573ca00646666ae68cdc3a8012400046424460040066eb8d5d09aab9e500423263200933573801401200e00c26aae7540044dd500089119191999ab9a3370ea00290021091100091999ab9a3370ea00490011190911180180218031aba135573ca00846666ae68cdc3a801a400042444004464c6401466ae7002c02802001c0184d55cea80089baa0012323333573466e1d40052002200823333573466e1d40092000200823263200633573800e00c00800626aae74dd5000a4c240029210350543100122002122001112323001001223300330020020014c1010a0001f5f6",
    }),
    headers: { "Content-Type": "application/json" },
    response: {
      type: "jsonwsp/response",
      version: "1.0",
      servicename: "ogmios",
      methodname: "EvaluateTx",
      result: {
        EvaluationResult: {
          "spend:0": {
            memory: 8994,
            steps: 3_193_105,
          },
          "mint:0": {
            memory: 713_992,
            steps: 180_490_034,
          },
        },
      },
      reflection: { id: expect.any(String) },
    },
  },
  {
    testName:
      "utils/txs/evaluate/utxos - error Unknown transaction input (missing from UTxO set)",
    endpoints: ["utils/txs/evaluate/utxos"],
    postBody: JSON.stringify({
      cbor:
        "84A60082825820000000000000000000000000000000000000000000000000" +
        "0000000000000000182A8258207D67D80BC5B3BADCAF02375E428A39AEA398" +
        "DD0438F26899A1B265C6AC87EB6B000D81825820DB7DBF9EAA6094982ED4B9" +
        "B735CE275345F348194A7E8E9200FEC7D1CAD008EB010181825839004A294F" +
        "1EF53B30CDBF7CAF17798422A90227224F9FBF037FCF6C47A5BC2EC1952D11" +
        "89886FE018214EED45F83AB04171C41F373D530CA7A61A3BB94E8002000E80" +
        "0B58206DF8859EC92C3FF6BC0E2964793789E44E4C5ABBCC9FF6F2387B94F4" +
        "C2020E6EA303814E4D01000033222220051200120011048180058184000018" +
        "2A820000F5F6",
      additionalUtxoSet: [
        [
          {
            txId: "0000000000000000000000000000000000000000000000000000000000000000",
            index: 42,
          },
          {
            address:
              "addr_test1wpnlxv2xv9a9ucvnvzqakwepzl9ltx7jzgm53av2e9ncv4sysemm8",
            value: { coins: 200_000 },
            datumHash:
              "45b0cfc220ceec5b7c1c62c4d4193d38e4eba48e8815729ce75f9c0ab0e4c1c0",
          },
        ],
      ],
    }),
    headers: { "Content-Type": "application/json" },
    response: {
      type: "jsonwsp/response",
      version: "1.0",
      servicename: "ogmios",
      methodname: "EvaluateTx",
      result: {
        EvaluationFailure: {
          ScriptFailures: {
            "spend:0": {
              CannotCreateEvaluationContext: {
                reason:
                  "Unknown transaction input (missing from UTxO set): 7d67d80bc5b3badcaf02375e428a39aea398dd0438f26899a1b265c6ac87eb6b#0",
              },
            },
          },
        },
      },
      reflection: { id: expect.any(String) },
    },
  },
];
